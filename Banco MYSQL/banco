/* MERtechyte: */

CREATE TABLE tb_funcionario (
    fun_codigo int PRIMARY KEY,
    fun_nome Varchar(50) not null,
    fun_cpf Varchar(14) not null,
    fun_nivel int ,
    fun_login int
);

CREATE TABLE tb_niveis_de_acesso (
    nv_codigo int PRIMARY KEY,
    nv_tipo Varchar(30) not null
);

CREATE TABLE tb_dados_funcionario (
    dfn_codigo int PRIMARY KEY,
    dfn_funcionario int not null,
    dfn_endereco Varchar(60) not null,
    dfn_numero int not null,
    dfn_cep int not null,
    dfn_telefone Varchar(14) not null,
    dfn_celular Varchar(14) not null
);

CREATE TABLE tb_dados_usuario (
    dusu_codigo int PRIMARY KEY,
    dusu_tb_codigo int,
    dusu_endereco Varchar(60) not null,
    dusu_numero int not null,
    dusu_cep int not null,
    dusu_telefone Varchar(14) not null,
    dusu_celular Varchar(14) not null
);

CREATE TABLE tb_usuario (
    usu_cod int PRIMARY KEY,
    usu_nome Varchar(50) not null,
    usu_cpf Varchar(14) not null,
    usu_nivel int,
    usu_login int
);

CREATE TABLE tb_servico (
    sv_codigo int PRIMARY KEY,
    sv_funcionario int,
    sv_nome Varchar(50) not null,
    sv_descricao Varchar(100) not null,
    sv_valor Decimal(10,2) not null
);

CREATE TABLE tb_agendamento_avulso (
    agv_codigo int PRIMARY KEY,
    agv_servico int,
    agv_funcionario int,
    agv_cliente int,
    agv_dta_atendimento datetime not null,
    agv_status Varchar(40) not null,
    agv_fatura int
);

CREATE TABLE tb_agendamento_pacote (
    agp_codigo int PRIMARY KEY,
    agp_servico int,
    agp_funcionario int,
    agp_cliente int,
    agp_dta_agendamento datetime not null,
    agp_status Varchar(40) not null,
    agp_fatura int
);

CREATE TABLE tb_fornecedor (
    fnd_codigo int PRIMARY KEY,
    fnd_nome Varchar(50) not null,
    fnd_descricao Varchar(100) not null
);

CREATE TABLE tb_dispesa (
    dis_codigo int PRIMARY KEY,
    dis_fornecedor int,
    dis_valor Decimal(10,2) not null,
    dis_descricao Varchar(100) not null
);

CREATE TABLE tb_centro_custo (
    cc_cogido int PRIMARY KEY,
    cc_descricao Varchar(100) not null,
    cc_status Boolean not null,
    cc_dispesa int
);

CREATE TABLE tb_fatura (
    fat_codigo int PRIMARY KEY,
    fat_centro_custo int,
    fat_data date not null,
    fat_valor Decimal(10,2) not null,
    fat_vencimento date not null
);

CREATE TABLE tb_login (
    lg_codigo int PRIMARY KEY,
    lg_email Varchar(50) not null,
    lg_senha Varchar(50) not null
);
 
ALTER TABLE tb_funcionario ADD CONSTRAINT cod_acesso
    FOREIGN KEY (fun_nivel)
    REFERENCES tb_niveis_de_acesso (nv_codigo);
 
ALTER TABLE tb_funcionario ADD CONSTRAINT fk_login
    FOREIGN KEY (fun_login)
    REFERENCES tb_login (lg_codigo);
 
ALTER TABLE tb_dados_funcionario ADD CONSTRAINT cod_funcionario
    FOREIGN KEY (dfn_funcionario)
    REFERENCES tb_funcionario (fun_codigo);
 
ALTER TABLE tb_dados_usuario ADD CONSTRAINT cod_usuario
    FOREIGN KEY (dusu_tb_codigo)
    REFERENCES tb_usuario (usu_cod);
 
ALTER TABLE tb_usuario ADD CONSTRAINT cod_usu_nivel
    FOREIGN KEY (usu_nivel)
    REFERENCES tb_niveis_de_acesso (nv_codigo);
 
ALTER TABLE tb_usuario ADD CONSTRAINT fk_usu_logi
    FOREIGN KEY (usu_login)
    REFERENCES tb_login (lg_codigo);
 
ALTER TABLE tb_servico ADD CONSTRAINT fk_cod_fun_sv
    FOREIGN KEY (sv_funcionario)
    REFERENCES tb_funcionario (fun_codigo);
 
ALTER TABLE tb_agendamento_avulso ADD CONSTRAINT fk_funcionario_cod
    FOREIGN KEY (agv_funcionario)
    REFERENCES tb_funcionario (fun_codigo);
 
ALTER TABLE tb_agendamento_avulso ADD CONSTRAINT fk_cod_usu_agv
    FOREIGN KEY (agv_cliente)
    REFERENCES tb_usuario (usu_cod);
 
ALTER TABLE tb_agendamento_avulso ADD CONSTRAINT fk_cod_sv
    FOREIGN KEY (agv_servico)
    REFERENCES tb_servico (sv_codigo);
 
ALTER TABLE tb_agendamento_avulso ADD CONSTRAINT fk_cod_fatura_agv
    FOREIGN KEY (agv_fatura)
    REFERENCES tb_fatura (fat_codigo);
 
ALTER TABLE tb_agendamento_pacote ADD CONSTRAINT fk_cod_sv_agp
    FOREIGN KEY (agp_servico)
    REFERENCES tb_servico (sv_codigo);
 
ALTER TABLE tb_agendamento_pacote ADD CONSTRAINT fk_cod_usu_agp
    FOREIGN KEY (agp_cliente)
    REFERENCES tb_usuario (usu_cod);
 
ALTER TABLE tb_agendamento_pacote ADD CONSTRAINT fk_cod_fun_agp
    FOREIGN KEY (agp_funcionario)
    REFERENCES tb_funcionario (fun_codigo);
 
ALTER TABLE tb_agendamento_pacote ADD CONSTRAINT FK_tb_agendamento_pacote_5
    FOREIGN KEY (agp_fatura)
    REFERENCES tb_fatura (fat_codigo);
 
ALTER TABLE tb_dispesa ADD CONSTRAINT fk_cod_fornecedor
    FOREIGN KEY (dis_fornecedor)
    REFERENCES tb_fornecedor (fnd_codigo);
 
ALTER TABLE tb_centro_custo ADD CONSTRAINT tk_dispesa_cc
    FOREIGN KEY (cc_dispesa)
    REFERENCES tb_dispesa (dis_codigo);
 
ALTER TABLE tb_fatura ADD CONSTRAINT fk_cod_cc_fat
    FOREIGN KEY (fat_centro_custo)
    REFERENCES tb_centro_custo (cc_cogido);